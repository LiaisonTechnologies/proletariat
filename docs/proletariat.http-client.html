<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>proletariat.http-client documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Proletariat</span> <span class="project-version">0.7.3</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>proletariat</span></div></div></li><li class="depth-2 branch"><a href="proletariat.config.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-2 branch"><a href="proletariat.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="proletariat.crypto.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>crypto</span></div></a></li><li class="depth-2 branch"><a href="proletariat.fsm.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fsm</span></div></a></li><li class="depth-2 branch current"><a href="proletariat.http-client.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>http-client</span></div></a></li><li class="depth-2 branch"><a href="proletariat.json.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>json</span></div></a></li><li class="depth-2"><a href="proletariat.mocks.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mocks</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="proletariat.http-client.html#var-create"><div class="inner"><span>create</span></div></a></li><li class="depth-1"><a href="proletariat.http-client.html#var-invoke.21"><div class="inner"><span>invoke!</span></div></a></li><li class="depth-1"><a href="proletariat.http-client.html#var-invoke-sync.21"><div class="inner"><span>invoke-sync!</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">proletariat.http-client</h1><div class="doc"><div class="markdown"><p>Provides simplified <a href="https://github.com/ztellman/aleph">Aleph HTTP Client</a> builders and utilities</p></div></div><div class="public anchor" id="var-create"><h3>create</h3><div class="usage"><code>(create)</code><code>(create config)</code></div><div class="doc"><div class="markdown"><p>Creates an Aleph HTTP Client from the provided configurations map.</p>
<p>Below is an example annotated configuration with defaults. All settings are optional. For the default client, simply call the no-arg arity.</p>
<pre><code>{;; Map with timeout configurations
 :timeouts {;; timeout in milliseconds for the pool to generate a connection
            :pool-timeout         nil

            ;; timeout in milliseconds for the connection to become
            ;; established
            :connection-timeout   60000

            ;; timeout in milliseconds for the arrival of a response
            ;; over the established connection
            :request-timeout      60000}

 ;; Map with Connection Pool configurations
 :pool-options {;; the maximum number of simultaneous connections to any host
                :connections-per-host 8

                ;; the maximum number of connections across all hosts
                :total-connections    1024

                ;; the target utilization of connections per host,
                ;; within `[0,1]`
                :target-utilization   0.9

                ;; the interval, in milliseconds, between use of the
                ;; controller to adjust the size of the pool
                :control-period       60000

                ;; the maximum number of pending acquires from the pool
                ;; that are allowed before `acquire` will start to throw
                ;; a `java.util.concurrent.RejectedExecutionException`
                :max-queue-size       65536}

 ;; Map with default options across all connections
 :connection-options  {;; the amount of the response, in bytes, that is
                       ;; buffered before the request returns. This does
                       ;; *not* represent the maximum size response that the
                       ;; client can handle (which is unbounded), and is
                       ;; only a means of maximizing performance.
                       :response-buffer-size 65536

                       ;; if `true`, attempts to reuse connections for
                       ;; multiple requests
                       :keep-alive?          true

                       ;; the maximum characters that can be in a single
                       ;; header entry of a response
                       :max-header-size      8192

                       ;; the maximum characters that can be in a single
                       ;; chunk of a streamed response
                       :max-chunk-size       8192

                       ;; If true, will ignore certificates and establish
                       ;; connection. Should only be used for development
                       :insecure?       false

                       ;; Path to the JKS Truststore to use for validating
                       ;; server certificates
                       :trust-store     "/path/to/truststore.jks"

                       ;; Truststore password as UTF-8 byte array, char
                       ;; array, or String. It is recommended to not use a
                       ;; plain String except in development.
                       :trust-store-pass [B}}
</code></pre></div></div><div class="src-link"><a href="https://github.com/LiaisonTechnologies/proletariat/blob/0.7.3/src/proletariat/http_client.clj/#L179">view source</a></div></div><div class="public anchor" id="var-invoke.21"><h3>invoke!</h3><div class="usage"><code>(invoke! client method url)</code><code>(invoke! client method url opts)</code></div><div class="doc"><div class="markdown"><p>Using the previously created client, invokes an HTTP request using the provided method on the provided URL. Can optionally specify a map of configurations including <code>:headers</code>, <code>:query-params</code>, and <code>body</code>. Returns a manifold deferred wrapping a Ring response map. The <code>body</code> in the response map will be an input stream.</p></div></div><div class="src-link"><a href="https://github.com/LiaisonTechnologies/proletariat/blob/0.7.3/src/proletariat/http_client.clj/#L147">view source</a></div></div><div class="public anchor" id="var-invoke-sync.21"><h3>invoke-sync!</h3><div class="usage"><code>(invoke-sync! client method url)</code><code>(invoke-sync! client method url opts)</code></div><div class="doc"><div class="markdown"><p>Provides the same functionality as <code>invoke!</code>, except will make the call synchronously and return the response map instead of a manifold deferred. Will timeout after <code>request-timeout</code> milliseconds.</p></div></div><div class="src-link"><a href="https://github.com/LiaisonTechnologies/proletariat/blob/0.7.3/src/proletariat/http_client.clj/#L166">view source</a></div></div></div></body></html>